<div class="flex h-screen overflow-hidden" dir="rtl">
  <aside [ngClass]="{'hidden': !isSidebarOpen, 'flex': isSidebarOpen}"
    class="w-72 glass-sidebar flex-shrink-0 flex flex-col h-full z-20 lg:flex shadow-xl shadow-slate-200/50">

    <div class="p-6 flex items-center gap-3">
      <div
        class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary-light to-primary flex items-center justify-center text-white shadow-lg shadow-primary/20">
        <i class="fa-solid fa-cash-register" style="color: rgb(76 174 79);"></i>
      </div>
      <div class="flex flex-col">
        <h1 class="text-gray-950 text-lg font-bold leading-tight">نظام نقاط البيع</h1>
        <p class="text-gray-400 text-xs">إصدار المؤسسات</p>
      </div>
    </div>

    <nav class="flex-1 px-4 py-4 space-y-2 overflow-y-auto">
      <div class="text-xs font-bold text-slate-400 px-3 mb-2 uppercase tracking-wider">القائمة الرئيسية</div>
      <a class="flex items-center gap-3 px-4 py-3 rounded-xl group transition-all duration-200 shadow-sm"
        style="background-color: #e5f3f0; color:#059669" href="#">
        <span class="material-symbols-outlined filled"><i class="fa-solid fa-chart-line"></i></span>
        <span class="font-bold">لوحة التحكم</span>
      </a>
      <a class="flex items-center gap-3 px-4 py-3 rounded-xl group transition-all duration-200 shadow-sm"
        style="background-color: #e5f3f0; color:#059669" href="#">
        <span class="material-symbols-outlined filled"><i class="fa-solid fa-cart-shopping"></i></span>
        <span class="font-bold">المبيعات</span>
      </a>
      <a class="flex items-center gap-3 px-4 py-3 rounded-xl group transition-all duration-200 shadow-sm"
        style="background-color: #e5f3f0; color:#059669" href="#">
        <span class="material-symbols-outlined filled"><i class="fa-solid fa-box-archive"></i></span>
        <span class="font-bold">المخزون</span>
      </a>
    </nav>

    <div class="p-4 border-t border-slate-200/60">
      <div
        class="flex items-center gap-3 p-3 rounded-xl bg-white/50 border border-slate-200/60 hover:bg-white/80 transition-colors cursor-pointer shadow-sm">
        <div class="h-10 w-10 rounded-full ring-2 ring-primary/20 bg-cover bg-center"
          style="background-image: url('/assets/download.png');"></div>
        <div class="flex flex-col flex-1 min-w-0">
          <p class="text-sm font-bold text-gray-950 truncate">{{userEmail}}</p>
          <p class="text-xs text-gray-400 truncate">مدير النظام</p>
        </div>
        <button class="text-gray-400 hover:text-danger transition-colors" (click)="logout()">
          <i class="fa-solid fa-right-from-bracket"></i> </button>
      </div>
    </div>
  </aside>

  <main class="flex-1 flex flex-col h-full overflow-hidden relative bg-gradient-to-br from-[#F8FAFC] to-[#f1f5f9]">
    <header
      class="h-20 flex items-center justify-between px-8 border-b border-slate-200/50 glass-card sticky top-0 z-10 shrink-0">
      <div class="flex items-center gap-4 flex-1">
        <div class="flex items-center gap-4 flex-1">
          <button class="lg:hidden text-gray-400 hover:text-primary">
            <span class="material-symbols-outlined">menu</span>
          </button>
          <div class="relative w-full max-w-md hidden sm:block group">
            <div
              class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-slate-400 group-focus-within:text-primary transition-colors">
              <i class="fa-solid fa-magnifying-glass"></i>
            </div>
            <input
              class="w-full bg-white/60 border border-slate-200/80 text-gray-950 text-sm rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary/50 block pr-10 pl-3 py-2.5 placeholder-slate-400 transition-all hover:bg-white"
              placeholder="بحث عن منتج، فاتورة، أو عميل..." type="text">
          </div>
        </div> <button (click)="toggleSidebar()" class="lg:hidden text-gray-400 hover:text-primary">
          <i class="fa-solid fa-bars"></i>
        </button>
        <div class="relative w-full max-w-md hidden sm:block group">
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div class="flex bg-slate-100 rounded-xl p-1 border border-slate-200/50">
          <button
            class="px-4 py-1.5 rounded-lg text-sm font-medium text-white bg-primary shadow-sm shadow-primary/20 transition-all">شهر</button>
          <button
            class="px-4 py-1.5 rounded-lg text-sm font-medium text-gray-400 hover:text-gray-950 hover:bg-white transition-all">سنة</button>
        </div>
        <button
          class="relative p-2 text-gray-400 hover:text-blue-600 hover:bg-white/50 rounded-xl transition-all border border-transparent hover:border-slate-200/50">
          <i class="fa-regular fa-bell"></i> <span
            class="absolute top-2.5 left-2.5 w-2 h-2 rounded-full ring-2 bg-red-600 "></span>
        </button>
        <button
          class="p-2 text-gray-400 hover:text-blue-600 hover:bg-white/50 rounded-xl transition-all border border-transparent hover:border-slate-200/50">
          <i class="fa-regular fa-circle-question"></i> </button>
      </div>
    </header>

    <div class="flex-1 overflow-y-auto p-4 sm:p-8">
      <div class="max-w-7xl mx-auto space-y-6">
        <div class="flex flex-col gap-4 mb-6 sm:flex-row sm:items-end sm:justify-between">

          <div class="header-content">
            <h2 class="text-2xl font-bold tracking-tight text-gray-950 mb-1">
              نظرة عامة
            </h2>
            <p class="text-sm font-medium text-gray-400">
              متابعة أداء المتجر لشهر{{ summaryData?.Period }}
            </p>
          </div>

          <div class="action-area">
            <button class="btn-primary-gradient group">
              <span class="material-symbols-outlined text-xl transition-transform group-hover:rotate-90"><i
                  class="fa-solid fa-plus"></i></span>
              <span class="font-bold">فاتورة جديدة</span>
            </button>
          </div>

        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

          <!-- إجمالي المبيعات -->
          <div
            class="group animationgreen bg-surface-light border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition-all duration-300 bg-white hover:border-primary/40">

            <div class="flex justify-between items-start mb-4">
              <div class="w-12 h-12 flex items-center justify-center rounded-xl
                  bg-primary text-primary
                  group-hover:bg-primary group-hover:text-white
                  transition-all duration-300">
                <i class="fa-solid fa-money-bill-1-wave text-lg"></i>
              </div>

              <span class="flex items-center text-sm font-medium
                   px-3 py-1 rounded-full" style="background-color: rgb(228 244 236); color: rgb(34 197 94);">
                <i class="fa-solid fa-arrow-trend-up mr-1 text-xs"></i>
                {{summaryData?.GrowthPercentage}}%
              </span>
            </div>

            <p class="text-gray-400 text-sm font-medium mb-1">إجمالي المبيعات</p>
            <h3 class="text-2xl font-bold text-gray-950 tracking-tight">
              {{ summaryData?.TotalRevenue | number:'1.0-0' }}
              <span class="text-sm font-normal text-gray-400">ج.م</span>
            </h3>
          </div>


          <!-- إجمالي المصروفات -->
          <div
            class="group bg-white animationred bg-surface-light border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition-all duration-300 hover:border-danger/40">

            <div class="flex justify-between items-start mb-4">
              <div class="w-12 h-12 flex items-center justify-center rounded-xl
                    bg-red-500/10 text-red-600
                    group-hover:bg-red-600 group-hover:text-white
                  transition-all duration-300" style="background-color: rgb(254 242 242); color: rgb(239 68 68); ">
                <i class="fa-solid fa-wallet text-lg"></i>
              </div>

              <span class="flex items-center text-sm font-medium
                    text-red-400 bg-red-100
                    border border-red-200/50
                    hover:bg-red-200/50

                   px-3 py-1 rounded-full">
                <i class="fa-solid fa-arrow-trend-up mr-1 text-xs"></i>
                +4.2%
              </span>
            </div>

            <p class="text-gray-400 text-sm font-medium mb-1">إجمالي المصروفات</p>
            <h3 class="text-2xl font-bold text-gray-950 tracking-tight">
              {{ summaryData?.TotalExpenses | number:'1.0-0' }}
              <span class="text-sm font-normal text-gray-400">ج.م</span>
            </h3>
          </div>


          <!-- صافي الربح -->
          <div
            class="group bg-white animationgreen bg-surface-light border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition-all duration-300 hover:border-success/40">

            <div class="flex justify-between items-start mb-4">
              <div class="w-12 h-12 flex items-center justify-center rounded-xl
              bg-primary group-hover:text-white
                  transition-all duration-300">
                <i class="fa-solid fa-sack-dollar text-lg"></i>
              </div>

              <span class="flex items-center text-sm font-medium

                    text-green-400 bg-green-100
                    border border-green-200/50

                   px-3 py-1 rounded-full">
                <i class="fa-solid fa-arrow-trend-up mr-1 text-xs"></i>
                +8.1%
              </span>
            </div>

            <p class="text-gray-400 text-sm font-medium mb-1">صافي الربح</p>
            <h3 class="text-2xl font-bold text-gray-950 tracking-tight">
              {{ summaryData?.NetProfit| number:'1.0-0' }}
              <span class="text-sm font-normal text-gray-400">ج.م</span>
            </h3>
          </div>


          <!-- عدد الفواتير -->
          <div
            class="group bg-white border border-slate-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition-all duration-300 hover:border-blue-400/40">

            <div class="flex justify-between items-start mb-4">
              <div class="w-12 h-12 flex items-center justify-center rounded-xl
                  bg-blue-500/10 text-blue-600
                  group-hover:bg-blue-600 group-hover:text-white
                  transition-all duration-300">
                <i class="fa-solid fa-receipt text-lg"></i>
              </div>

              <span class="flex items-center text-sm font-medium
                   text-gray-400 bg-slate-100
                   border border-slate-200
                   px-3 py-1 rounded-full">
                -
                <span class="ml-1">0.5%</span>
              </span>
            </div>

            <p class="text-gray-400 text-sm font-medium mb-1">عدد الفواتير</p>
            <h3 class="text-2xl font-bold text-gray-950 tracking-tight">
              {{ summaryData?.InvoicesCount }}
              <span class="text-sm font-normal text-gray-400">فاتورة</span>
            </h3>
          </div>

        </div>
        <div class="glass-card rounded-3xl p-6 border border-white/50 bg-white/40">
          <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
              <h3 class="text-lg font-bold text-text-dark">تحليل المبيعات والمصروفات</h3>
              <p class="text-text-muted text-sm">بيانات حقيقية من النظام</p>
            </div>

            <div class="flex items-center gap-4 text-sm bg-white/60 p-2 rounded-lg border border-white/50 shadow-sm">
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-primary shadow-[0_0_8px_rgba(5,150,105,0.5)]"></span>
                <span class="text-text-dark font-medium">المبيعات</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-slate-400"></span>
                <span class="text-text-dark font-medium">المصروفات</span>
              </div>
            </div>
          </div>

          <div class="relative w-full h-64 sm:h-80">
            <canvas #salesChart></canvas>
          </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 pb-6">
          <div class="lg:col-span-2 glass-card rounded-3xl p-6 border border-white/60 flex flex-col bg-white/40">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-bold text-text-dark">المنتجات الأكثر مبيعاً</h3>
              <button class="text-sm text-primary hover:text-primary-dark transition-colors font-medium">عرض
                الكل</button>
            </div>
            <div class="space-y-5">
              <div class="group">
                <div class="flex justify-between items-center mb-2">
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-xl bg-slate-50 bg-cover bg-center border border-slate-200 shadow-sm"
                      data-alt="Red Nike Sneakers"
                      style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuC6tp2c08R13T-qj-r_BEJoCEC9h89H7e0ipFM3bgEQ0X6il6qydf_E_2B2DXDDi70SP4VxTz0hlgOF1-UfftPROcrTZeuCEs6ksehfVRYhiNoQe3Y5nmLs05I4pmq3I2kwklurFMoTbjab8cXngns4rugu26QRjiNbAQ-yBST-S-0WmbD7jDcU8Ddfs9n1OmkUxjYRsNhDv9Grv4qMA_MZ-wd4b34jPaB9yxdSUXDLOVJXYKZOoq416OADUzPoMEXXF_qxSsI_wZJz')">
                    </div>
                    <div>
                      <p class="text-sm font-bold text-text-dark group-hover:text-primary transition-colors">حذاء رياضي
                        نايك</p>
                      <p class="text-xs text-text-muted font-display">120 قطعة</p>
                    </div>
                  </div>
                  <div class="text-left">
                    <p class="text-sm font-bold text-text-dark font-display">45,000 ر.س</p>
                  </div>
                </div>
                <div class="relative w-full h-1.5 bg-slate-200 rounded-full overflow-hidden">
                  <div class="absolute top-0 right-0 h-full bg-gradient-to-l from-primary-light to-primary rounded-full"
                    style="width: 85%"></div>
                </div>
              </div>
              <div class="group">
                <div class="flex justify-between items-center mb-2">
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-xl bg-slate-50 bg-cover bg-center border border-slate-200 shadow-sm"
                      data-alt="Headphones"
                      style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCLpML54Sd6EoMww0AW67LuXOXPeKxC9ObVBJh4StQDDuH_-zIjQ192qJIalL5UhSnsoBfaxYWI4yKdvhnqHR4vdIJQcG-HahF-FMIEnyJmAV1QsGhrokNmDnAluqrnEcw9Cm7kXwFywSdz2DoooLqjfJ-dCA-iy0PN-kNaDZ5I7o-mwdTBIoFU1ttptcq6B8FcYbF5DgY0FDzx4XTTw50uwU-PFwi8LL9-a_d3yqeUM2Y3g2q7-JLFtJRkTZR2yj_Utf1WoFK_WXdb')">
                    </div>
                    <div>
                      <p class="text-sm font-bold text-text-dark group-hover:text-primary transition-colors">سماعات رأس
                        لاسلكية</p>
                      <p class="text-xs text-text-muted font-display">95 قطعة</p>
                    </div>
                  </div>
                  <div class="text-left">
                    <p class="text-sm font-bold text-text-dark font-display">32,500 ر.س</p>
                  </div>
                </div>
                <div class="relative w-full h-1.5 bg-slate-200 rounded-full overflow-hidden">
                  <div class="absolute top-0 right-0 h-full bg-gradient-to-l from-blue-500 to-blue-600 rounded-full"
                    style="width: 65%"></div>
                </div>
              </div>
              <div class="group">
                <div class="flex justify-between items-center mb-2">
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-xl bg-slate-50 bg-cover bg-center border border-slate-200 shadow-sm"
                      data-alt="White Watch"
                      style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDz2WUdWwlLsGzlbh5b_skTTZmu_QcD_DnIAjuhr7ahx51ZRPj7LIZsFT21OSqP7NDTFAgfGudI-hmp4LYh0fVGmBN4cGwyDM_j3PqieMQrb-rbwKaFKXBX0lFoJOJKySB5PUHBtjFb11SjE9uTkx2i2Vg081QrcQp7RZb5e7AoFNh8_8bb3bGoaqwHzA_4l1_dFTJmKboK1fKycwU6JeDWES0zwNiJcAxOKjQKRRKSCyCwY_DW8Wtz5DKh9flS3UhrJTa0ppyHrOeQ')">
                    </div>
                    <div>
                      <p class="text-sm font-bold text-text-dark group-hover:text-primary transition-colors">ساعة ذكية
                        أبل</p>
                      <p class="text-xs text-text-muted font-display">60 قطعة</p>
                    </div>
                  </div>
                  <div class="text-left">
                    <p class="text-sm font-bold text-text-dark font-display">28,000 ر.س</p>
                  </div>
                </div>
                <div class="relative w-full h-1.5 bg-slate-200 rounded-full overflow-hidden">
                  <div class="absolute top-0 right-0 h-full bg-gradient-to-l from-cyan-500 to-cyan-600 rounded-full"
                    style="width: 50%"></div>
                </div>
              </div>
              <div class="group">
                <div class="flex justify-between items-center mb-2">
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-xl bg-slate-50 bg-cover bg-center border border-slate-200 shadow-sm"
                      data-alt="Headphones"
                      style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCK6BNmIhuE3N90Mh7rzqUsFxZBTAlPqs01S69UKDCLav6_s6j7CuHnCh_zcA5_AhIbQvIx98D_OQadTYESldvp3Io9CSVd1yMAc4BjGJIjpiO1_8gdNsm1dft6WS2QVmpMtVSRiAFFU6iRO68QHXvPDIoo1YkQQCPbsegMx4Uq51tSIFsa-PnwsP8mh8KKQkGMPuZY-V-6S2bXqR20T6Md7RWMAhz8PaFlYPkPRbmxJQ14NbE2O2t9_U-BI2QjnwWA5HjKX3AQPMNk')">
                    </div>
                    <div>
                      <p class="text-sm font-bold text-text-dark group-hover:text-primary transition-colors">سماعات رأس
                        سلكية</p>
                      <p class="text-xs text-text-muted font-display">45 قطعة</p>
                    </div>
                  </div>
                  <div class="text-left">
                    <p class="text-sm font-bold text-text-dark font-display">12,500 ر.س</p>
                  </div>
                </div>
                <div class="relative w-full h-1.5 bg-slate-200 rounded-full overflow-hidden">
                  <div
                    class="absolute top-0 right-0 h-full bg-gradient-to-l from-emerald-500 to-emerald-600 rounded-full"
                    style="width: 35%"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex flex-col gap-6">
            <div
              class="glass-card rounded-3xl p-6 border border-white/60 bg-gradient-to-br from-white to-primary/10 relative overflow-hidden shadow-lg">
              <div class="absolute -right-10 -top-10 w-32 h-32 bg-primary/20 rounded-full blur-3xl"></div>
              <div class="flex items-start justify-between mb-4 relative z-10">
                <div>
                  <p class="text-text-muted text-sm font-medium mb-1">قيمة المخزون الحالي</p>
                  <h3 class="text-3xl font-bold text-text-dark font-display tracking-tight">245,800 <span
                      class="text-sm text-primary font-normal">ر.س</span></h3>
                </div>
                <div class="bg-white p-2.5 rounded-xl text-primary border border-slate-100 shadow-md">
                  <span class="material-symbols-outlined">inventory</span>
                </div>
              </div>
              <div
                class="flex items-center gap-2 text-xs text-text-muted bg-white/60 p-2.5 rounded-lg border border-slate-100 relative z-10">
                <span class="material-symbols-outlined text-sm text-primary">info</span>
                <span>يتم تحديث القيمة تلقائياً كل 24 ساعة</span>
              </div>
            </div>
            <div class="glass-card rounded-3xl p-6 border border-white/60 flex-1 flex flex-col bg-white/40">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-text-dark">تنبيهات المخزون</h3>
                <span
                  class="bg-danger/10 text-danger text-xs px-2.5 py-1 rounded-full border border-danger/10 font-bold shadow-sm shadow-danger/5">عاجل</span>
              </div>
              <div class="space-y-3 flex-1">
                <div
                  class="flex items-center justify-between p-3 rounded-xl bg-white border border-slate-200 hover:border-danger/30 hover:bg-red-50/50 transition-colors group cursor-pointer shadow-sm">
                  <div class="flex items-center gap-3">
                    <div
                      class="w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center text-danger border border-red-100">
                      <span class="material-symbols-outlined">warning</span>
                    </div>
                    <div>
                      <p class="text-sm font-bold text-text-dark group-hover:text-danger transition-colors">قميص رجالي
                        أزرق</p>
                      <p class="text-xs text-danger font-bold">متبقي 2 فقط</p>
                    </div>
                  </div>
                  <button
                    class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-text-dark hover:bg-slate-100 transition-colors">
                    <span class="material-symbols-outlined text-lg">arrow_back</span>
                  </button>
                </div>
                <div
                  class="flex items-center justify-between p-3 rounded-xl bg-white border border-slate-200 hover:border-danger/30 hover:bg-red-50/50 transition-colors group cursor-pointer shadow-sm">
                  <div class="flex items-center gap-3">
                    <div
                      class="w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center text-danger border border-red-100">
                      <span class="material-symbols-outlined">warning</span>
                    </div>
                    <div>
                      <p class="text-sm font-bold text-text-dark group-hover:text-danger transition-colors">حقيبة ظهر
                        جلد</p>
                      <p class="text-xs text-danger font-bold">متبقي 1 فقط</p>
                    </div>
                  </div>
                  <button
                    class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-text-dark hover:bg-slate-100 transition-colors">
                    <span class="material-symbols-outlined text-lg">arrow_back</span>
                  </button>
                </div>
                <div
                  class="flex items-center justify-between p-3 rounded-xl bg-white border border-slate-200 hover:border-warning/30 hover:bg-amber-50/50 transition-colors group cursor-pointer shadow-sm">
                  <div class="flex items-center gap-3">
                    <div
                      class="w-10 h-10 rounded-lg bg-amber-50 flex items-center justify-center text-warning border border-amber-100">
                      <span class="material-symbols-outlined">low_priority</span>
                    </div>
                    <div>
                      <p class="text-sm font-bold text-text-dark group-hover:text-warning transition-colors">شاحن متنقل
                        20k</p>
                      <p class="text-xs text-warning font-bold">متبقي 5 فقط</p>
                    </div>
                  </div>
                  <button
                    class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-text-dark hover:bg-slate-100 transition-colors">
                    <span class="material-symbols-outlined text-lg">arrow_back</span>
                  </button>
                </div>
              </div>
              <button
                class="w-full mt-4 py-2.5 rounded-xl border border-slate-200 bg-slate-50 text-text-muted text-sm hover:bg-slate-100 hover:text-text-dark transition-all font-medium shadow-sm">
                إدارة المخزون
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
